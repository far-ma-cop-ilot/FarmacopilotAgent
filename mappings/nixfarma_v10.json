{
  "version": "10.x",
  "erp": "nixfarma",
  "description": "Mapping para Nixfarma versiÃ³n 10.x (SQL Server con nomenclatura antigua)",
  "tables": {
    "ventas": {
      "source_table": "VENTAS_LINEAS",
      "columns": [
        {
          "source": "FECHA_VENTA",
          "target": "fecha",
          "type": "datetime"
        },
        {
          "source": "CODIGO_ARTICULO",
          "target": "codigo_producto",
          "type": "string"
        },
        {
          "source": "DESCRIPCION",
          "target": "nombre_producto",
          "type": "string"
        },
        {
          "source": "CANTIDAD",
          "target": "cantidad",
          "type": "decimal"
        },
        {
          "source": "PRECIO_UNITARIO",
          "target": "precio_unitario",
          "type": "decimal"
        },
        {
          "source": "IMPORTE_VENTA",
          "target": "importe_total",
          "type": "decimal"
        },
        {
          "source": "TIPO_VENTA",
          "target": "tipo_venta",
          "type": "string"
        },
        {
          "source": "NUMERO_RECETA",
          "target": "numero_receta",
          "type": "string"
        },
        {
          "source": "CNP",
          "target": "codigo_nacional",
          "type": "string"
        }
      ],
      "incremental_column": "FECHA_VENTA",
      "query_template": "SELECT {columns} FROM {table} v INNER JOIN ARTICULOS a ON v.CODIGO_ARTICULO = a.CODIGO WHERE {incremental_column} > @LastExport"
    },
    "stock": {
      "source_table": "STOCK",
      "columns": [
        {
          "source": "CODIGO_ARTICULO",
          "target": "codigo_producto",
          "type": "string"
        },
        {
          "source": "STOCK_ACTUAL",
          "target": "stock_actual",
          "type": "decimal"
        },
        {
          "source": "STOCK_MINIMO",
          "target": "stock_minimo",
          "type": "decimal"
        },
        {
          "source": "FECHA_ACTUALIZACION",
          "target": "fecha_actualizacion",
          "type": "datetime"
        }
      ],
      "incremental_column": "FECHA_ACTUALIZACION",
      "query_template": "SELECT {columns} FROM {table} WHERE {incremental_column} > @LastExport"
    }
  }
}
